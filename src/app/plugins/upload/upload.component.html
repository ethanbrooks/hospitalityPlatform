<dx-text-box 
[(value)]="messageSubject" 
placeholder="Subject here...">
<dx-validator [validationRules]="loginRules"></dx-validator>
</dx-text-box>
<input type="file" (change)="onFileChange($event)" name="file" id="file" class="inputfile" multiple /><label for="file"> <i class="icon dx-icon-download"></i> Choose a file(s)</label>
<dx-button
text="Send"
type="success"
(onClick)="startUpload()">
</dx-button>

<dx-data-grid
id="gridContainer"
height="85%"

[(dataSource)]="filesDataSource"

(onToolbarPreparing)="onToolbarPreparing($event)"

noDataText="Drop Files Here..."

[columnAutoWidth]="true"
[columnHidingEnabled]="true"
[allowColumnReordering]="false"
[wordWrapEnabled]="true"

[repaintChangesOnly]="true"
[filterSyncEnabled]="false"

[showBorders]="true"
[showColumnLines]="false"
[showRowLines]="true"
[showBorders]="true"
[rowAlternationEnabled]="false"
>
<dxo-editing
mode="single"
useIcons="true"
refreshMode="repaint"
allowDeleting="true"
>
</dxo-editing>
<dxo-scrolling 
mode="virtual"
></dxo-scrolling>

<dxo-paging 
[pageSize]="30" 
[enabled]="true"
></dxo-paging>

<dxo-summary>
    <dxi-total-item
    column="size"
    [valueFormat]="formatSize"
    displayFormat="{0}"
    showInColumn="Size"
    summaryType="sum">
    </dxi-total-item>
</dxo-summary>

    <dxi-column caption="Type" dataField="name" cellTemplate="fileTypeIcon" [calculateDisplayValue]="fileType" [width]="60" [minWidth]="50" [allowResizing]="false" [hidingPriority]="1"></dxi-column>
    <div *dxTemplate="let fileTypeIcon of 'fileTypeIcon'">
            <img src="{{fileTypeIcon.text}}" width="36" alt="Avi">
    </div>
    <dxi-column caption="Name" dataField="name"></dxi-column>
    <dxi-column caption="Size" dataField="size" [calculateDisplayValue]="formatSize" dataType="number" [width]="100" [allowResizing]="false" [hidingPriority]="1"></dxi-column> 
    <dxi-column caption="Date" dataField="lastModifiedDate" [width]="100" [allowResizing]="false" [hidingPriority]="2"></dxi-column>
</dx-data-grid>
 

<dx-popup 
#progressUploadPopup
class="popup"
[width]="300"
[height]="250"
[showTitle]="true"
title="Uploading"
[dragEnabled]="false"
[closeOnOutsideClick]="true"
[showCloseButton]="false"
[visible]="false">
<div *dxTemplate="let data of 'content'">

    
    <dx-tree-list 
        #progressUploadList
        keyExpr="id"
        parentIdExpr="messageId"
        [dataSource]="progressUploadDataSource"
        [expandedRowKeys]="[1]"
        >
        <dxi-column caption="Queue" dataField="name" cellTemplate="cellTemplate"></dxi-column>
        <div *dxTemplate="let data of 'cellTemplate'">
                <div>{{data.text}}</div> <!--//
                <dx-progress-bar #progressUploadBar
                id="progress-bar-status"
                height="50"
                width="100%"
                [class.complete]="progressUploadBar.value == maxValue"
                [min]="0"
                [max]="maxValue"
                [statusFormat]="formatUpload"
                [value]="maxValue - seconds">
            </dx-progress-bar>        //-->
            </div>
    </dx-tree-list>

    <dx-button
    id="abortUpload"
    text="Cancel"
    type="failure"
    (onClick)="abortUpload()">
    </dx-button>
</div>
</dx-popup>